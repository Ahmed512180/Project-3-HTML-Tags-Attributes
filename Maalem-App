/***********************************************************
 * Ù…Ù†ØµØ© Ù…ÙØ¹Ù’Ù„ÙÙ…: ÙƒÙˆØ¯ Ø§Ù„Ù‡ÙŠÙƒÙ„ Ø§Ù„Ù…ØªÙƒØ§Ù…Ù„ (Ø§Ù„Ø£ÙƒØ§Ø¯ÙŠÙ…ÙŠØŒ Ø§Ù„Ù…Ù‡Ù†ÙŠØŒ Ø§Ù„Ø¯ÙŠÙ†ÙŠ)
 * Ø§Ù„ØªÙ‚Ù†ÙŠØ§Øª: React.js, React Router, CSS3, JavaScript Logic
 ***********************************************************/

import React, { useState, useEffect } from 'react';
import { BrowserRouter as Router, Routes, Route, Link } from 'react-router-dom';

// --- 1. Ù‚Ø§Ø¹Ø¯Ø© Ø¨ÙŠØ§Ù†Ø§Øª ØªØ¬Ø±ÙŠØ¨ÙŠØ© (Mock Database) ---
const mockStudent = {
  name: "Ø£Ø­Ù…Ø¯ Ù…Ø­Ù…Ø¯",
  university: "Ø¬Ø§Ù…Ø¹Ø© Ø§Ù„Ù‚Ø§Ù‡Ø±Ø©",
  academicScore: 85,
  professionalScore: 70,
  spiritualScore: 90,
  role: "Student",
  badges: ["Ù…Ø¨Ø±Ù…Ø¬ ÙˆØ§Ø¹Ø¯", "Ø­Ø§ÙØ¸ Ø£Ø¬Ø²Ø§Ø¡", "Ù…Ù‡Ù†Ø¯Ø³ Ù…Ø³ØªÙ‚Ø¨Ù„ÙŠ"]
};

// --- 2. Ù…Ø­Ø±Ùƒ Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡Ø§Øª ÙˆØ§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ (AI Logic) ---
const getSmartNotification = (stats) => {
  if (stats.academicScore > 80 && stats.spiritualScore < 50) {
    return "Ù…Ø§ Ø´Ø§Ø¡ Ø§Ù„Ù„Ù‡ Ø¹Ù„Ù‰ Ø§Ø¬ØªÙ‡Ø§Ø¯Ùƒ Ø§Ù„Ø£ÙƒØ§Ø¯ÙŠÙ…ÙŠ! Ù…Ø§ Ø±Ø£ÙŠÙƒ Ø¨Ù€ 5 Ø¯Ù‚Ø§Ø¦Ù‚ Ù…Ø¹ ÙˆØ±Ø¯Ùƒ Ø§Ù„Ù‚Ø±Ø¢Ù†ÙŠ Ù„ØªØ±ØªØ§Ø­ Ø±ÙˆØ­ÙƒØŸ âœ¨";
  }
  if (stats.professionalScore >= 70) {
    return "Ø£Ù†Øª Ø§Ù„Ø¢Ù† ØªÙ…ØªÙ„Ùƒ Ù…Ù‡Ø§Ø±Ø© Ù…Ù‡Ù†ÙŠØ© Ù‚ÙˆÙŠØ©! Ù‡Ù„ Ù†Ø±Ø³Ù„ Ù…Ù„ÙÙƒ Ù„Ø´Ø±ÙƒØ§Øª Ø§Ù„ØªÙˆØ¸ÙŠÙ Ø§Ù„Ø´Ø±ÙŠÙƒØ©ØŸ ğŸš€";
  }
  return "Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ ÙÙŠ Ù…ÙØ¹Ù’Ù„ÙÙ….. Ø±Ø­Ù„Ø© Ø§Ù„Ø¹Ù„Ù… ÙˆØ§Ù„Ø¹Ù…Ù„ ÙˆØ§Ù„Ù‚ÙŠÙ… ØªØ¨Ø¯Ø£ Ù…Ù† Ù‡Ù†Ø§.";
};

// --- 3. Ù…ÙƒÙˆÙ† Ø¹Ø¯Ø§Ø¯ ØªØ¯Ø±ÙŠØ¬ÙŠ (CountUp Component) ---
function CountUp({ target }) {
  const [value, setValue] = useState(0);

  useEffect(() => {
    let start = 0;
    const duration = 1000;
    const stepTime = Math.abs(Math.floor(duration / target));
    const timer = setInterval(() => {
      start += 1;
      setValue(start);
      if (start >= target) clearInterval(timer);
    }, stepTime);
    return () => clearInterval(timer);
  }, [target]);

  return <span>{value}%</span>;
}

// --- 4. ØµÙØ­Ø§Øª Ø§Ù„Ø£Ø¬Ù†Ø­Ø© ---
function AcademicPage() {
  return (
    <div style={styles.pageContainer}>
      <h2>ğŸ“š Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ ÙÙŠ Ø§Ù„Ø¬Ù†Ø§Ø­ Ø§Ù„Ø£ÙƒØ§Ø¯ÙŠÙ…ÙŠ - Ù‡Ù†Ø§ ØªØ¬Ø¯ Ø§Ù„Ù…Ø­Ø§Ø¶Ø±Ø§Øª ÙˆØ§Ù„Ø¯Ø±ÙˆØ³ Ø§Ù„Ø¬Ø§Ù…Ø¹ÙŠØ©.</h2>
      <Link to="/" style={styles.backBtn}>â¬…ï¸ Ø±Ø¬ÙˆØ¹ Ù„Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</Link>
    </div>
  );
}

function ProfessionalPage() {
  return (
    <div style={styles.pageContainer}>
      <h2>ğŸ’¼ Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ ÙÙŠ Ø§Ù„Ø¬Ù†Ø§Ø­ Ø§Ù„Ù…Ù‡Ù†ÙŠ - Ù‡Ù†Ø§ ØªØ¬Ø¯ Ù…Ø´Ø§Ø±ÙŠØ¹ Ø§Ù„Ø¨Ø±Ù…Ø¬Ø© ÙˆØ§Ù„Ù…Ù‡Ø§Ø±Ø§Øª Ø§Ù„Ø¹Ù…Ù„ÙŠØ©.</h2>
      <Link to="/" style={styles.backBtn}>â¬…ï¸ Ø±Ø¬ÙˆØ¹ Ù„Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</Link>
    </div>
  );
}

function SpiritualPage() {
  return (
    <div style={styles.pageContainer}>
      <h2>ğŸ•Œ Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ ÙÙŠ Ø§Ù„Ø¬Ù†Ø§Ø­ Ø§Ù„Ø¯ÙŠÙ†ÙŠ - Ù‡Ù†Ø§ ØªØ¬Ø¯ Ø§Ù„Ù‚Ø±Ø¢Ù† ÙˆØ§Ù„Ø³Ù†Ø© ÙˆØ§Ù„Ø¯Ø±ÙˆØ³ Ø§Ù„Ø£Ø®Ù„Ø§Ù‚ÙŠØ©.</h2>
      <Link to="/" style={styles.backBtn}>â¬…ï¸ Ø±Ø¬ÙˆØ¹ Ù„Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</Link>
    </div>
  );
}

// --- 5. Ø§Ù„Ù…ÙƒÙˆÙ† Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ Ù„Ù„Ù…Ù†ØµØ© (Home Component) ---
function Home({ student, notification }) {
  return (
    <div style={styles.container}>
      <header style={styles.header}>
        <h1>Ù…ÙØ¹Ù’Ù„ÙÙ… <span style={{fontSize: '0.5em'}}>Ma'lam</span></h1>
        <p>Ø¹ÙÙ„Ù…ØŒ Ø¹Ù…Ù„ØŒ ÙˆÙ‚ÙŠÙ…</p>
      </header>

      <div style={styles.notificationBar}>
        <strong>ğŸ”” ØªÙ†Ø¨ÙŠÙ‡ Ø°ÙƒÙŠ:</strong> {notification}
      </div>

      <div style={styles.wingsGrid}>
        <div style={{...styles.wingCard, borderColor: '#1a237e'}}>
          <h2 style={{color: '#1a237e'}}>ğŸ›ï¸ Ø§Ù„Ø¬Ù†Ø§Ø­ Ø§Ù„Ø£ÙƒØ§Ø¯ÙŠÙ…ÙŠ</h2>
          <p>ÙƒÙ„ÙŠØ§Øª Ø§Ù„Ø·Ø¨ØŒ Ø§Ù„Ù‡Ù†Ø¯Ø³Ø©ØŒ ÙˆØ§Ù„Ø­Ù‚ÙˆÙ‚..</p>
          <Link to="/academic" style={styles.btnAcademic}>Ø¯Ø®ÙˆÙ„ Ø§Ù„Ù…Ø­Ø§Ø¶Ø±Ø§Øª</Link>
        </div>

        <div style={{...styles.wingCard, borderColor: '#2e7d32'}}>
          <h2 style={{color: '#2e7d32'}}>ğŸ’¼ Ø§Ù„Ø¬Ù†Ø§Ø­ Ø§Ù„Ù…Ù‡Ù†ÙŠ</h2>
          <p>Ø§Ù„Ø¨Ø±Ù…Ø¬Ø©ØŒ Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠØŒ ÙˆØ§Ù„Ø¬Ø±Ø§ÙÙŠÙƒ..</p>
          <Link to="/professional" style={styles.btnProfessional}>Ø·Ø¨Ù‚ Ù…Ù‡Ø§Ø±Ø§ØªÙƒ</Link>
        </div>

        <div style={{...styles.wingCard, borderColor: '#c6a700'}}>
          <h2 style={{color: '#c6a700'}}>ğŸ•Œ Ø§Ù„Ø¬Ù†Ø§Ø­ Ø§Ù„Ø¯ÙŠÙ†ÙŠ</h2>
          <p>Ø§Ù„Ù‚Ø±Ø¢Ù†ØŒ Ø§Ù„Ø³Ù†Ø©ØŒ ÙˆØ§Ù„Ù‚ÙŠÙ… Ø§Ù„Ø£Ø®Ù„Ø§Ù‚ÙŠØ©..</p>
          <Link to="/spiritual" style={styles.btnSpiritual}>Ø¨Ù†Ø§Ø¡ Ø§Ù„Ø±ÙˆØ­</Link>
        </div>
      </div>

      <section style={styles.profileSection}>
        <h3>Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø´Ø®ØµÙŠ Ø§Ù„Ù…ÙˆØ­Ø¯ (Student Identity)</h3>
        <div style={styles.statsContainer}>
          <div style={styles.statBox}>
            ğŸ“ Ø£ÙƒØ§Ø¯ÙŠÙ…ÙŠ:
            <progress style={styles.progressAcademic} value={student.academicScore} max="100"></progress>
            <CountUp target={student.academicScore} />
          </div>
          <div style={styles.statBox}>
            ğŸ› ï¸ Ù…Ù‡Ù†ÙŠ:
            <progress style={styles.progressProfessional} value={student.professionalScore} max="100"></progress>
            <CountUp target={student.professionalScore} />
          </div>
          <div style={styles.statBox}>
            âœ¨ Ù‚ÙŠÙ…ÙŠ:
            <progress style={styles.progressSpiritual} value={student.spiritualScore} max="100"></progress>
            <CountUp target={student.spiritualScore} />
          </div>
        </div>
        <div style={styles.badgeContainer}>
          {student.badges.map(b => <span key={b} style={styles.badge}>â— {b}</span>)}
        </div>
      </section>
    </div>
  );
}

// --- 6. ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ù…Ù†ØµØ© Ù…Ø¹ Routing ---
export default function MaalamPlatform() {
  const [student] = useState(mockStudent);
  const [notification, setNotification] = useState("");

  useEffect(() => {
    const msg = getSmartNotification(student);
    setNotification(msg);
  }, [student]);

  return (
    <Router>
      <Routes>
        <Route path="/" element={<Home student={student} notification={notification} />} />
        <Route path="/academic" element={<AcademicPage />} />
        <Route path="/professional" element={<ProfessionalPage />} />
        <Route path="/spiritual" element={<SpiritualPage />} />
      </Routes>
    </Router>
  );
}

// --- 7. Ø§Ù„ØªÙ†Ø³ÙŠÙ‚Ø§Øª (Styling) ---
const styles = {
  container: { direction: 'rtl', fontFamily: 'Arial, sans-serif', padding: '20px', backgroundColor: '#f4f7f6' },
  header: { textAlign: 'center', marginBottom: '30px', borderBottom: '2px solid #ddd', paddingBottom: '10px' },
  notificationBar: { backgroundColor: '#fff3cd', padding: '15px', borderRadius: '8px', marginBottom: '20px', border: '1px solid #ffeeba' },
  wingsGrid: { display: 'grid', gridTemplateColumns: 'repeat(auto-fit, minmax(250px, 1fr))', gap: '20px' },
  wingCard: { backgroundColor: '#fff', padding: '20px', borderRadius: '12px', borderTop: '8px solid', textAlign: 'center', boxShadow: '0 4px 6px rgba(0,0,0,0.1)' },
  profileSection: { marginTop: '40px', padding: '20px', backgroundColor: '#fff', borderRadius: '12px', boxShadow: '0 4px 6px rgba(0,0,0,0.1)' },
  statsContainer: { display: 'flex', justifyContent: 'space-around', margin: '20px 0' },
  statBox: { padding: '10px 20px', borderRadius: '20px', backgroundColor: '#eee', fontWeight: 'bold', display: 'flex', flexDirection: 'column', alignItems: 'center', gap: '5px' },
  badgeContainer: { display: 'flex', gap: '10px', justifyContent: 'center' },
  badge: { backgroundColor: '#e3f2fd', padding: '5px 15px', borderRadius: '15px', fontSize: '0.8em', color: '#1976d2' },
  btnAcademic: { backgroundColor: '#1a237e', color: '#fff', padding: '10px 20px', borderRadius: '5px', text
